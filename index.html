!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>UPI Payment Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
<div class="w-full max-w-xl bg-white shadow-2xl rounded-3xl p-8">
  <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-8">Payment Page Generator</h1>

  <div class="space-y-5 mb-6">
    <div>
      <label class="block text-gray-700 font-semibold mb-2">App Name</label>
      <input id="appName" type="text" placeholder="E.g. My Store"
        class="w-full px-5 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Client Name</label>
      <input id="clientName" type="text" placeholder="E.g. John Doe"
        class="w-full px-5 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Amount (INR)</label>
      <input id="amount" type="number" placeholder="E.g. 1000"
        class="w-full px-5 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>
    <div>
      <label class="block text-gray-700 font-semibold mb-2">UPI ID</label>
      <input id="upiId" type="text" placeholder="E.g. yourname@upi"
        class="w-full px-5 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Upload QR Code (optional)</label>
      <input id="qrUpload" type="file" accept="image/*"
        class="w-full px-5 py-2 rounded-xl border focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>
  </div>

  <button onclick="generatePaymentPage()"
    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-xl transition">
    Generate Payment Page Link
  </button>

  <div id="output" class="mt-6 p-4 bg-gray-50 rounded-xl border hidden">
    <p class="text-gray-700 font-medium mb-2">Payment Page Link:</p>
    <a id="paymentLink" href="#" target="_blank" class="text-indigo-600 underline break-all hover:text-indigo-800"></a>
  </div>
</div>

<script>
function generatePaymentPage() {
  const appName = encodeURIComponent(document.getElementById('appName').value.trim());
  const clientName = encodeURIComponent(document.getElementById('clientName').value.trim());
  const amount = encodeURIComponent(document.getElementById('amount').value.trim());
  const upiId = encodeURIComponent(document.getElementById('upiId').value.trim());
  const qrFile = document.getElementById('qrUpload').files[0];

  if (!appName || !clientName || !amount || !upiId) {
    alert("Please fill all fields.");
    return;
  }

  if (qrFile) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const qrData = encodeURIComponent(e.target.result);
      const link = `pay.html?app=${appName}&client=${clientName}&amount=${amount}&upi=${upiId}&qr=${qrData}`;
      document.getElementById('paymentLink').href = link;
      document.getElementById('paymentLink').innerText = window.location.origin + "/" + link;
      document.getElementById('output').classList.remove('hidden');
    }
    reader.readAsDataURL(qrFile);
  } else {
    const link = `pay.html?app=${appName}&client=${clientName}&amount=${amount}&upi=${upiId}`;
    document.getElementById('paymentLink').href = link;
    document.getElementById('paymentLink').innerText = window.location.origin + "/" + link;
    document.getElementById('output').classList.remove('hidden');
  }
}
</script>
</body>
</html>
